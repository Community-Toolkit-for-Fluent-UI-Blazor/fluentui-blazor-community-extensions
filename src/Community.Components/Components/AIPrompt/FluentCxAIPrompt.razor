@namespace FluentUI.Blazor.Community.Components
@inherits FluentComponentBase

<CascadingValue Value="this" IsFixed>
    <FluentToolbar>
        <FluentButton Appearance="Appearance.Neutral"
                      IconStart="@(new Icons.Filled.Size20.BotSparkle())"
                      OnClick="@(() => _activeView = $"aiprompt-view-{Id}")"
                      Id="@($"aiprompt-view-{Id}")">
            @(Labels.AskAILabel)
        </FluentButton>

        <FluentButton Appearance="Appearance.Neutral"
                      IconStart="@(new Icons.Filled.Size20.ChatEmpty())"
                      OnClick="@(() => _activeView = $"aiprompt-result-view-{Id}")"
                      Id="@($"aiprompt-result-view-{Id}")">
            @(Labels.ResultLabel)
        </FluentButton>

        @if (Menus.Any())
        {
            <FluentButton Appearance="Appearance.Neutral"
                          IconStart="@(new Icons.Regular.Size20.MoreHorizontal())"
                          OnClick="@(() => IsMenuOpen = !IsMenuOpen)"
                          Id="@($"aiprompt-command-view-{Id}")">
            </FluentButton>
        }
    </FluentToolbar>
    
    @if (_activeView == $"aiprompt-view-{Id}")
    {
        <AIPromptView @ref=_aiPromptView />
    }
    else if (_activeView == $"aiprompt-result-view-{Id}")
    {
        <AIPromptResultView @ref=_aiPromptResultView />
    }

    <AIPromptMenuView IsMenuOpen=@IsMenuOpen AnchorId="@($"aiprompt-command-view-{Id}")" />
</CascadingValue>
