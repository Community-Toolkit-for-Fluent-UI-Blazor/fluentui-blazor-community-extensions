@namespace FluentUI.Blazor.Community.Components
@inherits FluentComponentBase

<CascadingValue Value="this" IsFixed>
    <FluentKeyCode Anchor="@($"OverflowButton{Id}")" OnKeyDown="@OnHandleOverflowKeyDownAsync" />
    <FluentKeyCode Anchor="@($"menu-container-{Id}")" OnKeyDown="@OnHandleMenuContainerKeyDownAsync" />

    <div id="@Id" class="@InternalCss" style="@Style">
        <FluentStack Style="margin-inline-start: calc(var(--design-unit) * 2px + 8px);" HorizontalGap="2">
            @if (Root is not null)
            {
                <FluentCxPathBarItem Id="@Root.Id"
                                     Label="@Root!.Label"
                                     Icon="@(GetHomeIcon())"
                                     ShowLabel="false"
                                     Items=@Root.Items
                                     OnTapped="@(() => OnPathSelectedAsync(Root))" />

                @if (_overflowItems.Count > 0)
                {
                    <OverflowButton Id="@($"OverflowButton{Id}")" Items=@_overflowItems />
                }

                @foreach (var item in _visibleItems)
                {
                    <FluentCxPathBarItem Id="@item.Id"
                                         Label=@item.Label
                                         Items="@item.Items"
                                         Icon=@item.Icon />
                }
            }
        </FluentStack>
    </div>
</CascadingValue>
